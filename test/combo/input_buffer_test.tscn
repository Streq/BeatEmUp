[gd_scene load_steps=7 format=2]

[ext_resource path="res://input/player_controller.tscn" type="PackedScene" id=1]
[ext_resource path="res://test/combo/input_buffer.gd" type="Script" id=2]
[ext_resource path="res://test/combo/combo_display.gd" type="Script" id=3]
[ext_resource path="res://test/combo/combo_name.gd" type="Script" id=4]
[ext_resource path="res://test/combo/combo.gd" type="Script" id=5]
[ext_resource path="res://test/combo/combo_listener.gd" type="Script" id=6]

[node name="Control" type="Control"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -20.0
margin_top = -20.0
margin_right = 20.0
margin_bottom = 20.0

[node name="combo_display" type="Label" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_top = -7.0
margin_bottom = 7.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 5
script = ExtResource( 3 )
input_buffer = NodePath("../input_buffer")

[node name="combo_name" type="Label" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_top = 50.0
margin_bottom = 64.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 5
script = ExtResource( 4 )

[node name="Timer" type="Timer" parent="combo_name"]
process_mode = 0

[node name="player_controller" parent="." instance=ExtResource( 1 )]

[node name="input_buffer" type="Node" parent="."]
script = ExtResource( 2 )
controller = NodePath("../player_controller")

[node name="combo_timer" type="Timer" parent="input_buffer"]
process_mode = 0
wait_time = 0.25
one_shot = true

[node name="simul_press_timer" type="Timer" parent="input_buffer"]
wait_time = 0.033
one_shot = true

[node name="combo_listener" type="Node" parent="."]
script = ExtResource( 6 )
input_buffer = NodePath("../input_buffer")

[node name="shoryuken" type="Node" parent="combo_listener"]
script = ExtResource( 5 )
combinations = PoolStringArray( "623B", "421B" )

[node name="hadouken" type="Node" parent="combo_listener"]
script = ExtResource( 5 )
combinations = PoolStringArray( "236B", "214B" )

[connection signal="timeout" from="combo_name/Timer" to="combo_name" method="_on_Timer_timeout"]
[connection signal="combo" from="combo_listener" to="combo_name" method="_on_combo"]
